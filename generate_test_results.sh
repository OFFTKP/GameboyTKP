#!/bin/sh
if (( $# != 3 )); then
    >&2 echo "Correct syntax: generate_test_results (TKPEmu path) (blargg tests directory) (mooneye-gb tests directory)"
    exit
fi

emu=$1
outf="./TEST_RESULTS.md"
blargg=$2
mooneye=$3

# Delete file contents
>$outf

echo "GameboyTKP test results generated by $USER on $(date).    " >> $outf
echo "-----" >> $outf
echo "**[Blargg](https://github.com/gblargg)'s tests:**    " >> $outf
echo "Testing blargg directory $blargg"
# Generate blargg tests
$emu -T $blargg -r -p -g -G $outf
echo "-----" >> $outf
echo "**[Gekkio](https://github.com/Gekkio)'s tests:**    " >> $outf
echo "Testing mooneye directory $mooneye"
# Generate mooneye tests
$emu -T $mooneye -r -p -g -G $outf
echo "-----" >> $outf
echo "To generate these test results, use generate_test_results.sh in /gb_tkp/" >> $outf
